### Hongik Univ Graduation Project 2021
###             딥러닝을 활용한 헬스 자세 교정 프로그램

***

+ **개발 배경 및 서론**

유튜브와 같은 소셜미디어가 대중화됨에 따라 사람들이 쉽게 홈 트레이닝 및 헬스에 대한 정보를 쉽게 얻을 수 있게 되었습니다.

그러나, 매체를 통해 헬스에 대한 정보를 얻었다 하더라도 적절한 피드백이 없다면 본인이 헬스를 제대로 하고 있는지 정확히는 알 수는 없습니다.

이에 헬스 자세를 인식하고 피드백을 해주는 프로그램의 필요성을 느껴 이 프로젝트를 시작했습니다.

물론, 수 많은 헬스 자세에 대한 피드백을 모두 제공하는 종합 프로그램을 만드는 것은 학습 데이터 수집의 어려움 때문에 결국 한계가 있었습니다.

그럼에도, 여러 헬스 자세 중 개발이 완료된 푸시업 자세 교정 프로그램을 집중해 본 프로젝트의 내용과 결과에 대해 설명하도록 합니다.

***

#### 프로그램 아키텍처

프로그램은 프레임 감지 기능, 키 포인트 추출, 그리고 자세평가 세 단계로 이루어집니다.

사용자가 본인이 운동한 푸시업한 영상을 프로그램에 업로드하면 세 단계를 거친 후, 피드백 결과를 받을 수 있습니다.

개괄적인 코드는 아래와 같습니다.

```python
  # inputFilePath에 피드백 받고자 하는 운동 자세가 담긴 영상 파일이 있다.

  detectPushUp(inputFilePath, tmpFilePath) // 동영상에서 운동 동작(푸시업)이 나타난 부분(프레임)만 추출한다.
  timeSeriesDataFrame = getTimeSeriesKeyPoint(tmpFilePath) // 추출된 프레임으로 부터 인체 키 포인트 좌표를 추출한다.
  getJsonResult(timeSeriesDataFrame, outputFilePath) // 추출된 시계열의 키 포인트 좌표들을 조작힌 후, 딥러닝을 통해 피드백 결과를 저장한다. 
```

+ **프레임 감지 기능(detectPushup)**

프레임 감지 기능의 결과는 아래의 두 gif a와 b를 통해 확인할 수 있습니다.
***
<img width="100%" src="https://user-images.githubusercontent.com/62477958/157073502-dc301e39-7ac3-4499-b13b-6e96bb707266.gif"/>

**a. 촬영된 동영상**


<img width="100%" src="https://user-images.githubusercontent.com/62477958/157073574-938bf746-a1dc-43ea-8ab3-eb58e5d6abe1.gif"/>

**b. 프레임 감지 기능이 적용된 촬영된 동영상**
***
만약, 프로그램 사용자가 본인의 푸시업 자세에 대해 피드백을 받기 위해 동영상을 촬영했다고 가정합니다.

촬영된 동영상(gif a)에는 피드백이 필요한 푸시업 동작 뿐만 아니라 불필요한 부분(ex. 걸어가는 부분, 푸시업 자세를 잡기 위한 준비동작 등)이 포함됩니다.

그러므로, 촬영된 영상으로부터 불필요한 부분을 제거해야 합니다. 이러한 제거 과정을 프레임 감지 기능이 담당합니다.

프레임 감지 기능은 컴퓨터 비젼 라이브러리 OpenCV와 객체 탐지 딥러닝 모델인 YOLOv5를 사용해 구현했습니다.

동영상 내 움직임이 나타나지 않은 프레임 구간을 판정해 제거하기 위해 OpenCV 라이브러리를 활용했고,

푸시업이 나타난 부분을 탐지하기 위해 YOLOv5 모델을 학습시켜 사용했습니다.


